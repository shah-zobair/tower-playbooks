- hosts: oc_client
  tasks:
  - block:
      - name: Check if Project already exist or not
        shell: "export KUBECONFIG=/etc/origin/master/admin.kubeconfig; oc login -u system:admin >/dev/null; oc get project {{ project_name }}"
        register: oc_output
      - debug: var=oc_output.stdout_lines

      - name: Fail if project already exist
        fail:
        when: "'NotFound' not in oc_output.stdout"

      - name: Create Project
        shell: "export KUBECONFIG=/etc/origin/master/admin.kubeconfig; oc login -u system:admin >/dev/null; oc new-project {{ project_name }}"
        register: oc_output
      - debug: var=oc_output.stdout_lines
